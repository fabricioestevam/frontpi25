<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hub Cidad√£o - T√≥tem Inteligente</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse-dot {
            animation: pulse-dot 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect } = React;

        function HubCidadaoTotem() {
            const [currentTime, setCurrentTime] = useState(new Date());
            const [selectedBus, setSelectedBus] = useState(null);
            const [showServices, setShowServices] = useState(false);
            
            const [buses, setBuses] = useState([
                { id: 1, number: '1910', destination: 'TI Aeroporto', arrivalTime: 3, distance: 850, passengers: 45 },
                { id: 2, number: '520', destination: 'Centro', arrivalTime: 7, distance: 2100, passengers: 32 },
                { id: 3, number: '315', destination: 'Shopping', arrivalTime: 12, distance: 3500, passengers: 28 },
                { id: 4, number: '2080', destination: 'Universidade', arrivalTime: 15, distance: 4200, passengers: 51 }
            ]);

            useEffect(() => {
                const timer = setInterval(() => {
                    setCurrentTime(new Date());
                }, 1000);
                return () => clearInterval(timer);
            }, []);

            useEffect(() => {
                const interval = setInterval(() => {
                    setBuses(prevBuses => 
                        prevBuses.map(bus => {
                            const newTime = bus.arrivalTime > 0 ? bus.arrivalTime - 1 : 0;
                            const newDistance = bus.distance > 0 ? bus.distance - 150 : 0;
                            return {
                                ...bus,
                                arrivalTime: newTime,
                                distance: newDistance
                            };
                        }).sort((a, b) => a.arrivalTime - b.arrivalTime)
                    );
                }, 10000);
                return () => clearInterval(interval);
            }, []);

            const routes = {
                '1910': ['Terminal Integrado', 'Av. Principal', 'Centro', 'Aeroporto', 'TI Aeroporto'],
                '520': ['Bairro Norte', 'Av. Central', 'Pra√ßa da Liberdade', 'Centro'],
                '315': ['Zona Leste', 'Shopping Center', 'Parque Municipal', 'Terminal'],
                '2080': ['Campus Universit√°rio', 'Hospital Central', 'Rodovi√°ria', 'Centro']
            };

            const services = [
                { title: 'Direitos do Passageiro', desc: 'Conhe√ßa seus direitos no transporte p√∫blico' },
                { title: 'Tarifa Social', desc: 'Saiba como solicitar desconto na passagem' },
                { title: 'Reclama√ß√µes', desc: 'Registre problemas com o servi√ßo de √¥nibus' },
                { title: 'Hor√°rios Especiais', desc: 'Consulte hor√°rios de feriados e eventos' }
            ];

            if (showServices) {
                return (
                    <div style={{minHeight: '100vh', background: 'linear-gradient(135deg, #2563eb 0%, #1e40af 100%)', padding: '24px'}}>
                        <div style={{maxWidth: '448px', margin: '0 auto', background: 'white', borderRadius: '24px', boxShadow: '0 25px 50px -12px rgba(0,0,0,0.25)', overflow: 'hidden'}}>
                            <div style={{background: '#2563eb', color: 'white', padding: '24px'}}>
                                <button 
                                    onClick={() => setShowServices(false)}
                                    style={{marginBottom: '16px', display: 'flex', alignItems: 'center', color: 'white', background: 'none', border: 'none', cursor: 'pointer', fontSize: '16px'}}
                                >
                                    ‚Üê Voltar
                                </button>
                                <h2 style={{fontSize: '24px', fontWeight: 'bold', margin: 0}}>Servi√ßos e Direitos</h2>
                                <p style={{color: '#bfdbfe', fontSize: '14px', marginTop: '8px'}}>Informa√ß√µes √∫teis para cidad√£os</p>
                            </div>
                            
                            <div style={{padding: '24px'}}>
                                {services.map((service, idx) => (
                                    <div key={idx} style={{background: '#eff6ff', padding: '16px', borderRadius: '12px', border: '2px solid #bfdbfe', marginBottom: '16px', cursor: 'pointer'}}>
                                        <h3 style={{fontWeight: 'bold', fontSize: '18px', color: '#1e3a8a', margin: '0 0 4px 0'}}>{service.title}</h3>
                                        <p style={{color: '#4b5563', fontSize: '14px', margin: '4px 0'}}>{service.desc}</p>
                                        <button style={{marginTop: '12px', color: '#2563eb', fontWeight: '600', fontSize: '14px', background: 'none', border: 'none', cursor: 'pointer', display: 'flex', alignItems: 'center'}}>
                                            Saiba mais ‚Üí
                                        </button>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                );
            }

            if (selectedBus) {
                const bus = buses.find(b => b.number === selectedBus);
                if (!bus) return null;
                
                return (
                    <div style={{minHeight: '100vh', background: 'linear-gradient(135deg, #2563eb 0%, #1e40af 100%)', padding: '24px'}}>
                        <div style={{maxWidth: '448px', margin: '0 auto', background: 'white', borderRadius: '24px', boxShadow: '0 25px 50px -12px rgba(0,0,0,0.25)', overflow: 'hidden'}}>
                            <div style={{background: '#2563eb', color: 'white', padding: '24px'}}>
                                <button 
                                    onClick={() => setSelectedBus(null)}
                                    style={{marginBottom: '16px', display: 'flex', alignItems: 'center', color: 'white', background: 'none', border: 'none', cursor: 'pointer', fontSize: '16px'}}
                                >
                                    ‚Üê Voltar
                                </button>
                                <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>
                                    <div>
                                        <h2 style={{fontSize: '32px', fontWeight: 'bold', margin: 0}}>Linha {bus.number}</h2>
                                        <p style={{color: '#bfdbfe', marginTop: '4px'}}>{bus.destination}</p>
                                    </div>
                                    <div style={{textAlign: 'right'}}>
                                        <div style={{fontSize: '40px', fontWeight: 'bold'}}>{bus.arrivalTime}</div>
                                        <div style={{fontSize: '14px', color: '#bfdbfe'}}>minutos</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div style={{padding: '24px'}}>
                                <div style={{background: '#f0fdf4', border: '2px solid #86efac', borderRadius: '12px', padding: '16px', marginBottom: '24px'}}>
                                    <div style={{display: 'flex', alignItems: 'center', color: '#15803d', fontWeight: '600', marginBottom: '8px'}}>
                                        üì° Rastreamento ao vivo
                                    </div>
                                    <p style={{fontSize: '14px', color: '#4b5563', margin: '4px 0'}}>
                                        Dist√¢ncia aproximada: {bus.distance}m da parada
                                    </p>
                                    <p style={{fontSize: '14px', color: '#4b5563', margin: '4px 0'}}>
                                        Lota√ß√£o estimada: {bus.passengers} passageiros
                                    </p>
                                </div>

                                <h3 style={{fontWeight: 'bold', fontSize: '18px', marginBottom: '16px', color: '#1f2937'}}>Itiner√°rio Completo</h3>
                                <div>
                                    {routes[bus.number].map((stop, idx) => (
                                        <div key={idx} style={{display: 'flex', alignItems: 'start', marginBottom: '12px'}}>
                                            <div style={{marginRight: '16px', marginTop: '4px'}}>
                                                <div style={{
                                                    width: '16px', 
                                                    height: '16px', 
                                                    borderRadius: '50%', 
                                                    background: idx === 0 ? '#2563eb' : '#d1d5db',
                                                    border: '2px solid white',
                                                    boxShadow: '0 2px 4px rgba(0,0,0,0.1)'
                                                }}></div>
                                                {idx < routes[bus.number].length - 1 && (
                                                    <div style={{width: '2px', height: '32px', background: '#d1d5db', marginLeft: '6px', marginTop: '4px'}}></div>
                                                )}
                                            </div>
                                            <div style={{flex: 1}}>
                                                <p style={{fontWeight: '600', color: idx === 0 ? '#2563eb' : '#374151', margin: 0}}>
                                                    {stop}
                                                </p>
                                                {idx === 0 && (
                                                    <p style={{fontSize: '12px', color: '#2563eb', marginTop: '4px'}}>Voc√™ est√° aqui</p>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div style={{minHeight: '100vh', background: 'linear-gradient(135deg, #2563eb 0%, #1e40af 100%)', padding: '24px'}}>
                    <div style={{maxWidth: '448px', margin: '0 auto', background: 'white', borderRadius: '24px', boxShadow: '0 25px 50px -12px rgba(0,0,0,0.25)', overflow: 'hidden'}}>
                        <div style={{background: 'linear-gradient(90deg, #2563eb 0%, #1d4ed8 100%)', color: 'white', padding: '24px'}}>
                            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '16px'}}>
                                <h1 style={{fontSize: '24px', fontWeight: 'bold', margin: 0}}>Hub Cidad√£o</h1>
                                <div style={{textAlign: 'right'}}>
                                    <div style={{fontSize: '14px', opacity: 0.9}}>
                                        {currentTime.toLocaleDateString('pt-BR', { weekday: 'short', day: '2-digit', month: 'short' })}
                                    </div>
                                    <div style={{fontSize: '18px', fontWeight: '600'}}>
                                        {currentTime.toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' })}
                                    </div>
                                </div>
                            </div>
                            <div style={{display: 'flex', alignItems: 'center', background: 'rgba(59, 130, 246, 0.5)', borderRadius: '8px', padding: '12px'}}>
                                <span style={{marginRight: '8px'}}>üìç</span>
                                <div>
                                    <p style={{fontWeight: '600', margin: 0}}>Parada: Centro - Av. Principal</p>
                                    <p style={{fontSize: '12px', color: '#bfdbfe', margin: '2px 0 0 0'}}>C√≥digo: 2547</p>
                                </div>
                            </div>
                        </div>

                        <div style={{background: '#f0fdf4', borderBottom: '2px solid #86efac', padding: '12px 24px'}}>
                            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'center', color: '#15803d', fontWeight: '600'}}>
                                <div style={{width: '8px', height: '8px', background: '#22c55e', borderRadius: '50%', marginRight: '8px'}} className="animate-pulse-dot"></div>
                                üì° Atualizado em tempo real
                            </div>
                        </div>

                        <div style={{padding: '24px'}}>
                            <h2 style={{fontSize: '20px', fontWeight: 'bold', color: '#1f2937', marginBottom: '16px'}}>
                                √înibus se aproximando
                            </h2>
                            
                            <div>
                                {buses.map((bus, index) => (
                                    <div 
                                        key={bus.id}
                                        onClick={() => setSelectedBus(bus.number)}
                                        style={{
                                            background: index === 0 ? '#f0fdf4' : 'white',
                                            border: index === 0 ? '2px solid #86efac' : '2px solid #e5e7eb',
                                            borderRadius: '16px',
                                            padding: '16px',
                                            cursor: 'pointer',
                                            marginBottom: '12px',
                                            transition: 'all 0.3s'
                                        }}
                                    >
                                        <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>
                                            <div style={{display: 'flex', alignItems: 'center', flex: 1}}>
                                                <div style={{
                                                    width: '48px',
                                                    height: '48px',
                                                    borderRadius: '12px',
                                                    display: 'flex',
                                                    alignItems: 'center',
                                                    justifyContent: 'center',
                                                    marginRight: '16px',
                                                    background: index === 0 ? '#22c55e' : '#3b82f6',
                                                    fontSize: '24px'
                                                }}>
                                                    üöå
                                                </div>
                                                <div style={{flex: 1}}>
                                                    <div style={{display: 'flex', alignItems: 'center'}}>
                                                        <h3 style={{fontSize: '20px', fontWeight: 'bold', color: '#1f2937', margin: 0}}>{bus.number}</h3>
                                                        {index === 0 && (
                                                            <span style={{marginLeft: '8px', background: '#22c55e', color: 'white', fontSize: '12px', padding: '4px 8px', borderRadius: '12px', fontWeight: '600'}}>
                                                                PR√ìXIMO
                                                            </span>
                                                        )}
                                                    </div>
                                                    <p style={{color: '#4b5563', fontSize: '14px', margin: '2px 0'}}>{bus.destination}</p>
                                                    <p style={{fontSize: '12px', color: '#6b7280', margin: '4px 0 0 0'}}>
                                                        {bus.distance}m de dist√¢ncia
                                                    </p>
                                                </div>
                                            </div>
                                            <div style={{textAlign: 'right', marginLeft: '16px'}}>
                                                <div style={{
                                                    fontSize: '32px',
                                                    fontWeight: 'bold',
                                                    color: bus.arrivalTime <= 5 ? '#16a34a' : '#2563eb'
                                                }}>
                                                    {bus.arrivalTime}
                                                </div>
                                                <div style={{fontSize: '12px', color: '#6b7280'}}>minutos</div>
                                                <div style={{marginTop: '4px'}}>‚è±Ô∏è</div>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>

                            <button
                                onClick={() => setShowServices(true)}
                                style={{
                                    width: '100%',
                                    marginTop: '24px',
                                    background: 'linear-gradient(90deg, #3b82f6 0%, #2563eb 100%)',
                                    color: 'white',
                                    padding: '16px',
                                    borderRadius: '16px',
                                    fontWeight: '600',
                                    display: 'flex',
                                    alignItems: 'center',
                                    justifyContent: 'center',
                                    border: 'none',
                                    cursor: 'pointer',
                                    fontSize: '16px',
                                    boxShadow: '0 4px 6px rgba(0,0,0,0.1)'
                                }}
                            >
                                ‚ÑπÔ∏è Informa√ß√µes e Servi√ßos P√∫blicos
                            </button>

                            <div style={{marginTop: '24px', background: '#eff6ff', borderRadius: '12px', padding: '16px', border: '1px solid #bfdbfe'}}>
                                <div style={{display: 'flex', alignItems: 'start'}}>
                                    <span style={{fontSize: '20px', marginRight: '12px', flexShrink: 0}}>üí°</span>
                                    <p style={{fontSize: '14px', color: '#374151', margin: 0}}>
                                        <strong>Sistema inteligente:</strong> Os tempos de chegada s√£o calculados automaticamente por c√¢meras IoT que detectam os √¥nibus em tempo real.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<HubCidadaoTotem />);
    </script>
</body>
</html>